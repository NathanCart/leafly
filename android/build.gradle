// android/build.gradle
// ──────────────────────────────────────────────────────────────────────────────
// 1) PROJECT-WIDE EXT BLOCK (must be BEFORE buildscript)
ext {
    compileSdkVersion = 35
    buildToolsVersion = "35.0.0"
    minSdkVersion     = 24
    targetSdkVersion  = 34
    ndkVersion        = "26.1.10909125"
    kotlinVersion     = "1.9.25"
}

// 2) GRADLE PLUGIN & DEPENDENCIES
buildscript {
    repositories {
        google()
        mavenCentral()
    }
    dependencies {
        // pin to a known Android Gradle Plugin
        classpath("com.android.tools.build:gradle:8.4.0")
        // React Native plugin
        classpath("com.facebook.react:react-native-gradle-plugin")
        // Kotlin plugin, explicitly using the ext.kotlinVersion
        classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:${project.ext.kotlinVersion}")
    }
}

// 3) APPLY RN ROOT PROJECT PLUGIN
apply plugin: "com.facebook.react.rootproject"

// 4) ALL PROJECTS REPOSITORIES
allprojects {
    repositories {
        // React Native / JSC from npm
        maven {
            url(new File(
              ['node', '--print', "require.resolve('react-native/package.json')"]
                 .execute(null, rootDir).text.trim(),
              '../android'
            ))
        }
        maven {
            url(new File(
              ['node', '--print', "require.resolve('jsc-android/package.json', { paths: [require.resolve('react-native/package.json')] })"]
                 .execute(null, rootDir).text.trim(),
              '../dist'
            ))
        }
        google()
        mavenCentral()
        maven { url 'https://www.jitpack.io' }
    }
}
